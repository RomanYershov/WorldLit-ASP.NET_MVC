
@{
    ViewBag.Title = "Recipes";
}

<style>
    .card-demo {
        border: 1px solid black;
        margin-bottom: 8px;
        margin-right: 2px;
    }

        .card-demo:hover {
            cursor: pointer;
            box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
        }

    .recipe-content {
        width: 550px;
        height: auto;
        border: 1px solid black;
        position: absolute;
        left: 100px;
        top: 60px;
        z-index: 1;
        display: none;
    }
</style>



<div class="well">
    <category></category>
</div>


<template id="category-template">
    <div class="row ">
        <div class="col-md-2 sidenav">
            <h3><a href="#" data-bind="text: 'Все', click: getAllRecipes"></a></h3>
            <div data-bind="foreach: foodCategories">
                <h3><a href="#" data-bind="text: name, click:$parent.getRecipesByCategoryId"></a></h3>
            </div>
        </div>


        <div class="col-md-8">
            <div data-bind="foreach: recipes">
                <recipe params="recipe: {name:name, text: text, image: image, id:id, isClickRecipe: isClickRecipe}"></recipe>
                <div class="alert-success recipe-content ls" data-bind="style: {display: isClickRecipe()? 'block': 'none' }">
                    <div style="float: right" class="glyphicon glyphicon-remove-sign" data-bind="click:$parent.removeBlock"></div>
                    <div class="thumbnail">
                        <img width="100%" class="img-thumbnail" data-bind="attr:{src:image}" alt="Card image cap">
                    </div>
                    <h3 data-bind="text:name"></h3>
                    <div class="">
                        <p data-bind="text:text"></p>
                    </div>

                </div>
            </div>

        </div>
        <div class="col-md-2">
            <input class="form-control" data-bind="value:$component.search,valueUpdate : 'afterkeydown'" id="myInput" type="text" placeholder="Search..">
            @Html.ActionLink("Калькулятор продуктов", "Index", "Product")
        </div>
    </div>
</template>

<template id="recipe-template">
    <div class="col-lg-3">
        <div class="card-demo" data-bind="click: getRecipContent">
            <div class="thumbnail">
                <img width="100%" data-bind="attr:{src:image}" alt="Card image cap">
            </div>
            <div class="caption" style="background: bisque;padding: 5px">
                <h5 class="" data-bind="text:name"></h5>
                <p class=""><small class="text-muted">demo</small></p>
            </div>
        </div>
    </div>
</template>








@section scripts
{
    @Scripts.Render("/Scripts/models/food-category-view-model.js")
    @Scripts.Render("/Scripts/models/recipe-view-model.js")
    <script>
        $(document).ready(function () {
            ko.applyBindings();
        });

        var removeBlock = function (el) {
            debugger;
            $('.ls').css({ 'display': 'none' });
        };

    </script>
}

